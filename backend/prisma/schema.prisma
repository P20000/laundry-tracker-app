// This file is adapted for use with MySQL on Render or Local

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL") 
}

generator client {
  provider = "prisma-client-js"
  output   = "./generated/client"
}

// ----------------------------------------------------
// 1. CLOTHING ITEM
// ----------------------------------------------------
model ClothingItem {
  id              String         @id @default(uuid()) @db.VarChar(36)
  userId          String         @default("demo-user") @db.VarChar(36) // Default for MVP
  name            String         @db.VarChar(255)
  
  // New fields from Frontend
  itemType        String         @db.VarChar(50)
  category        String         @default("Casuals") @db.VarChar(50)
  size            String         @default("M") @db.VarChar(10)
  color           String         @default("#000000") @db.VarChar(20)
  
  // Use LongText for Base64 Image strings
  imageUrl        String         @db.LongText 
  
  currentStatus   ItemStatus     @default(CLEAN)
  damageLog       String?        @db.Text
  
  washEvents      WashEvent[]
  lastWashed      DateTime?      @db.DateTime(3)
  
  createdAt       DateTime       @default(now()) @db.DateTime(3)
  updatedAt       DateTime       @updatedAt @db.DateTime(3)
  
  @@map("clothing_items")
}

// ----------------------------------------------------
// 2. WASH HISTORY
// ----------------------------------------------------
model WashEvent {
  id              String          @id @default(uuid()) @db.VarChar(36)
  clothingItem    ClothingItem    @relation(fields: [clothingItemId], references: [id])
  clothingItemId  String          @db.VarChar(36)
  washDate        DateTime        @default(now()) @db.DateTime(3)
  notes           String?         @db.Text
  createdAt       DateTime        @default(now()) @db.DateTime(3)
  
  @@map("wash_events")
}

enum ItemStatus {
  CLEAN            
  READY_FOR_WASH   
  WASHING          
  DAMAGED          
  OVERDUE          
  
  @@map("item_status")
}