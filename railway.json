{
  "$schema": "https://railway.app/railway.schema.json",
  "name": "laundry-tracker-app",
  "description": "Full-stack application for tracking clothing inventory and wash history, deployed via Railway.",
  
  "services": [
    {
      "name": "api",
      "rootDir": "backend",
      "buildCommand": "npm install && npm run build:ts",
      "startCommand": "npx prisma migrate deploy && node dist/index.js", 
      "healthcheckPath": "/health",
      "type": "container"
    },
    {
      "name": "frontend",
      "rootDir": "frontend",
      "buildCommand": "npm install && npm run build",
      "startCommand": "nginx -g 'daemon off;'", 
      "type": "container"
    }
  ],
  "dependencies": [
    {
      "name": "postgres-db",
      "type": "postgresql"
    }
  ],
  
  // NOTE: This array is empty because service definitions are handled above.
  // We do not want Railway to try to build the root directory.
  "build": [] 
}